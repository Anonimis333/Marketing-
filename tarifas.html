<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tarifas de Servicios | Crick Marketing</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <!-- Alpine.js para interactividad adicional -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <style>
      .service-card {
        transition: all 0.3s ease;
        transform-style: preserve-3d;
      }
      .service-card:hover {
        transform: translateY(-5px) rotateX(5deg);
        box-shadow: 0 10px 25px rgba(110, 72, 170, 0.1);
      }
      [aria-selected="true"] {
        background-color: #6e48aa;
        color: white;
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans" x-data="{ selectedPackage: 'basic' }">
    <!-- Header -->
    <header
      class="bg-gradient-to-r from-purple-800 to-purple-600 text-white py-16 px-4 text-center"
    >
      <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">Nuestras Tarifas</h1>
        <p class="text-xl opacity-90">
          Selecciona los servicios que necesitas y calcula tu precio
        </p>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto py-12 px-4">
      <!-- Package Selector -->
      <div class="flex flex-wrap justify-center gap-4 mb-12">
        <button
          @click="selectedPackage = 'basic'"
          :aria-selected="selectedPackage === 'basic'"
          class="px-6 py-3 rounded-full font-medium transition-all category-btn"
        >
          Básico
        </button>
        <button
          @click="selectedPackage = 'standard'"
          :aria-selected="selectedPackage === 'standard'"
          class="px-6 py-3 rounded-full font-medium transition-all category-btn"
        >
          Estándar
        </button>
        <button
          @click="selectedPackage = 'premium'"
          :aria-selected="selectedPackage === 'premium'"
          class="px-6 py-3 rounded-full font-medium transition-all category-btn"
        >
          Premium
        </button>
        <button
          @click="selectedPackage = 'custom'"
          :aria-selected="selectedPackage === 'custom'"
          class="px-6 py-3 rounded-full font-medium transition-all category-btn"
        >
          Personalizado
        </button>
      </div>

      <!-- Dynamic Content with HTMX -->
      <div
        hx-get="/api/packages?type=basic"
        hx-trigger="load, selectedPackage from:body"
        hx-swap="innerHTML"
        hx-target="this"
        class="fade-in"
      >
        <!-- Content will be loaded here dynamically -->
        <div class="text-center py-8">
          <i class="fas fa-spinner fa-spin text-2xl text-purple-600"></i>
          <p class="mt-2">Cargando opciones...</p>
        </div>
      </div>

      <!-- Custom Calculator -->
      <div
        x-show="selectedPackage === 'custom'"
        x-transition
        class="mt-12 bg-white rounded-xl shadow-md p-8"
      >
        <h2 class="text-2xl font-bold text-gray-800 mb-6">
          Calculadora Personalizada
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <!-- Services Selection -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Selecciona Servicios:</h3>

            <div class="space-y-4">
              <label class="flex items-center space-x-3">
                <input
                  type="checkbox"
                  name="services"
                  value="menu"
                  class="rounded text-purple-600 focus:ring-purple-500"
                  hx-post="/api/calculate"
                  hx-trigger="change"
                  hx-target="#custom-total"
                  hx-include="[name='services']"
                />
                <span>Menú Digital ($1,200 - $2,500)</span>
              </label>

              <label class="flex items-center space-x-3">
                <input
                  type="checkbox"
                  name="services"
                  value="catalog"
                  class="rounded text-purple-600 focus:ring-purple-500"
                  hx-post="/api/calculate"
                  hx-trigger="change"
                  hx-target="#custom-total"
                  hx-include="[name='services']"
                />
                <span>Catálogo Digital ($1,800 - $3,500)</span>
              </label>

              <label class="flex items-center space-x-3">
                <input
                  type="checkbox"
                  name="services"
                  value="qr"
                  class="rounded text-purple-600 focus:ring-purple-500"
                  hx-post="/api/calculate"
                  hx-trigger="change"
                  hx-target="#custom-total"
                  hx-include="[name='services']"
                />
                <span>Códigos QR ($300 - $1,200)</span>
              </label>

              <label class="flex items-center space-x-3">
                <input
                  type="checkbox"
                  name="services"
                  value="logo"
                  class="rounded text-purple-600 focus:ring-purple-500"
                  hx-post="/api/calculate"
                  hx-trigger="change"
                  hx-target="#custom-total"
                  hx-include="[name='services']"
                />
                <span>Diseño de Logo ($1,200 - $3,000)</span>
              </label>
            </div>

            <div class="mt-6">
              <h3 class="text-lg font-semibold mb-2">Extras:</h3>
              <select
                name="extras"
                class="w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500"
                hx-post="/api/calculate"
                hx-trigger="change"
                hx-target="#custom-total"
                hx-include="[name='services'], [name='extras']"
              >
                <option value="none">Sin extras</option>
                <option value="hosting">
                  Hosting + Mantenimiento ($250/mes)
                </option>
                <option value="analytics">Analytics QR ($150/mes)</option>
                <option value="both">Ambos servicios ($350/mes)</option>
              </select>
            </div>
          </div>

          <!-- Results -->
          <div class="bg-gray-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold mb-4">Resumen de Cotización</h3>

            <div id="selected-services" class="mb-4">
              <!-- Dynamic content will appear here -->
              <p class="text-gray-500">
                Selecciona servicios para ver detalles
              </p>
            </div>

            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between items-center">
                <span class="font-semibold">Total estimado:</span>
                <span
                  id="custom-total"
                  class="text-2xl font-bold text-purple-600"
                  >$0 MXN</span
                >
              </div>
            </div>

            <button
              class="w-full mt-6 bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg font-medium transition-colors"
            >
              Solicitar Cotización Exacta
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- FAQ Section -->
    <section class="max-w-4xl mx-auto py-12 px-4">
      <h2 class="text-2xl font-bold text-center text-gray-800 mb-8">
        Preguntas Frecuentes
      </h2>

      <div class="space-y-4">
        <div
          hx-get="/api/faq/1"
          hx-trigger="revealed"
          hx-swap="innerHTML"
          class="bg-white p-4 rounded-lg shadow-sm"
        >
          <!-- FAQ content loaded dynamically -->
        </div>
        <div
          hx-get="/api/faq/2"
          hx-trigger="revealed"
          hx-swap="innerHTML"
          class="bg-white p-4 rounded-lg shadow-sm"
        >
          <!-- FAQ content loaded dynamically -->
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="bg-purple-700 text-white py-16 px-4 text-center">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-3xl font-bold mb-6">
          ¿Listo para comenzar tu proyecto?
        </h2>
        <p class="text-xl mb-8 opacity-90">
          Contáctanos para una cotización exacta basada en tus necesidades
        </p>
        <a
          href="https://wa.me/5215512345678"
          class="inline-block bg-white text-purple-700 font-bold py-3 px-8 rounded-full hover:bg-gray-100 transition duration-300"
        >
          <i class="fab fa-whatsapp mr-2"></i> Contactar por WhatsApp
        </a>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 px-4">
      <div class="max-w-6xl mx-auto text-center">
        <p class="text-sm">
          © 2024 Crick Marketing. Todos los derechos reservados.
        </p>
        <p class="text-xs text-gray-400 mt-2">
          Tarifas sujetas a cambio según complejidad del proyecto
        </p>
      </div>
    </footer>

    <!-- Fake API Responses (for demo purposes) -->
    <script>
      // This would normally be server-side endpoints
      document.addEventListener("htmx:afterRequest", function (evt) {
        if (evt.detail.requestConfig.path === "/api/calculate") {
          const formData = new FormData(
            evt.detail.elt.form || evt.detail.elt.closest("form"),
          );
          const services = formData.getAll("services");
          const extras = formData.get("extras");

          // Calculate price
          let total = 0;
          let servicesList = "";

          if (services.includes("menu")) {
            total += 1500;
            servicesList += "<li>Menú Digital</li>";
          }
          if (services.includes("catalog")) {
            total += 2100;
            servicesList += "<li>Catálogo Digital</li>";
          }
          if (services.includes("qr")) {
            total += 500;
            servicesList += "<li>Códigos QR</li>";
          }
          if (services.includes("logo")) {
            total += 2300;
            servicesList += "<li>Diseño de Logo</li>";
          }

          // Add extras
          if (extras === "hosting") total += 250;
          if (extras === "analytics") total += 150;
          if (extras === "both") total += 350;

          // Update UI
          document.getElementById("selected-services").innerHTML = servicesList
            ? `<ul class="list-disc pl-5">${servicesList}</ul>`
            : '<p class="text-gray-500">Selecciona servicios para ver detalles</p>';

          document.getElementById("custom-total").innerText =
            `$${total.toLocaleString()} MXN`;
        }
      });
    </script>
  </body>
</html>
